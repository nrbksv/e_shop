{% extends 'base.html' %}

{% block content %}
    {% include 'nav_bar.html' %}
    <table class="table table-striped border-0">
      <thead>
        <tr class="border-0">
          <th scope="col">
          <ul class="nav-bar nav">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle c-link t-link" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Категория
              </a>
              <ul class="px-2 dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="c-link" href="{% url 'product-list' %}"><li class="py-1">Все</li></a>
                  {% for i in categories %}
                <a class="c-link t-link" href="{% url 'category-filter' i.0 %}"><li class="py-1">{{ i.1 }}</li></a>
                  {% endfor %}
              </ul>
            </li>
          </ul>
          </th>
          <th class="align-middle t-link" scope="col">Наименование</th>
          <th class="align-middle t-link" scope="col">Цена</th>
        </tr>
      </thead>
      <tbody class="border-0">
      {% if products %}
          {% for product in products %}
              {% if product.balance > 0 %}
                <tr>
                  <td class="pl-4">
                      <a class="product-link" href="{% url 'category-filter' product.category %}">
                          {{ product.get_category_display }}
                      </a>
                  </td>
                  <td>
                      <a class="product-link" href="{% url 'product-detail' product.id %}">
                          {{ product.product }}
                      </a>
                  </td>
                  <td>{{ product.price }}</td>
                </tr>
              {% endif %}
          {% endfor %}
      {% else %}
          <tr><td>Нет товаров</td></tr>
      {% endif %}
      </tbody>
    </table>
{% endblock %}